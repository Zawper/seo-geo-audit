<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprawd≈∫ widoczno≈õƒá swojej strony</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .screen-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .screen-container.active {
            display: flex !important;
        }

        .border-3 {
    border-width: 3px;
}
```

---

## üé® Co siƒô zmieni≈Ço:

### ‚úÖ **Usuniƒôte:**
- ‚ùå Du≈ºe k√≥≈Çko z lupƒÖ u g√≥ry

### ‚úÖ **Dodane/Zmienione:**
- ‚úÖ **Progress bar powiƒôkszony** (h-6 zamiast h-4)
- ‚úÖ **Progress bar na ≈õrodku** z lepszym designem
- ‚úÖ **Procent wiƒôkszy** (text-xl zamiast text-sm)
- ‚úÖ **Ma≈Çe krƒôcƒÖce siƒô k√≥≈Çka** przy ka≈ºdym check (dok≈Çadnie jak du≈ºe by≈Ço wcze≈õniej)
- ‚úÖ **P≈Çynna animacja** - k√≥≈Çko zamienia siƒô w zielony check ‚úì
- ‚úÖ **Hover effect** - lekkie pod≈õwietlenie przy najechaniu
- ‚úÖ **Lepszy spacing** - wiƒôcej miejsca miƒôdzy elementami

---

## üí° Efekt wizualny:

**PRZED:**
```
[Du≈ºe k√≥≈Çko üîç]
Progress: 47%
‚è≥ Szybko≈õƒá ≈Çadowania
‚è≥ Mobile...
```

**PO:**
```
Analizujƒô example.com

‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 47%    Testujƒô prƒôdko≈õƒá...

‚≠ï Szybko≈õƒá ≈Çadowania     (krƒôci siƒô)
‚úÖ Mobile-friendly        (zielony check)
‚≠ï HTTPS...               (krƒôci siƒô)
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-fuchsia-100 min-h-screen">
    
    <!-- SCREEN 1: Input Form -->
    <div id="screen1" class="screen-container active">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center">
            <h1 class="text-3xl font-bold text-gray-700 mb-2">Sprawd≈∫ czy Twoi klienci</h1>
            <p class="text-gray-600 mb-6">widzƒÖ twojƒÖ stronƒô w Google i chat'ach AI</p>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 text-left">E-mail</label>
                    <input type="email" id="emailInput" placeholder="tw√≥j@email.pl"    
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2 text-left">Adres strony</label>
                    <input type="url" id="urlInput" placeholder="https://twojastrona.pl" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none">
                </div>
                
                <!-- Honeypot -->
                <input type="text" name="website" id="websiteField" 
                       style="position: absolute; left: -9999px;" 
                       tabindex="-1" 
                       autocomplete="off"
                       value="">
                
                <button onclick="startAudit()" 
                        class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-4 rounded-lg transition duration-200 transform hover:scale-105 mt-6 shadow-lg">
                    üîç Sprawd≈∫ za darmo
                </button>
                
                <div class="mt-6 space-y-2">
                    <p class="text-sm text-gray-500 text-center">‚è±Ô∏è Analiza trwa ~60 sekund</p>
                    <div class="flex justify-center gap-6 flex-wrap">
                        <p class="text-sm text-gray-500">‚úì Bez logowania</p>
                        <p class="text-sm text-gray-500">‚úì Bez formalno≈õci</p>
                        <p class="text-sm text-gray-500">‚úì Dane bezpieczne</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCREEN 2: Loading -->
<div id="screen2" class="screen-container">
    <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto">
       <div class="mb-8 text-center">
    <p class="text-sm text-gray-500 mb-2">Analizujƒô</p>
    <h2 id="analyzingUrl" class="text-lg font-bold text-purple-600 break-all px-4"></h2>
</div>
        
        <!-- Progress bar (powiƒôkszony i na ≈õrodku) -->
        <!-- Progress bar (powiƒôkszony i na ≈õrodku) -->
<div class="mb-6">
    <div class="bg-gray-200 rounded-full h-6 overflow-hidden shadow-inner">
        <div id="progressBar" class="bg-gradient-to-r from-purple-600 via-purple-500 to-pink-600 h-6 transition-all duration-500 relative" style="width: 0%">
            <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-pulse"></div>
        </div>
    </div>
    <div class="flex justify-between items-center mt-3">
        <p id="progressText" class="text-xl font-bold text-gray-800">0%</p>
        <p id="statusText" class="text-sm text-gray-600 text-right">Inicjalizacja...</p>
    </div>
</div>

<!-- Fun loading messages - TUTAJ TERAZ! -->
<div class="mb-8 p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg text-center border border-purple-100">
    <p id="loadingMessage" class="text-sm text-purple-700 font-medium">
        üí° Przygotowujemy analizƒô...
    </p>
</div>
        
        <!-- Checklist z ma≈Çymi k√≥≈Çkami -->
        <div class="space-y-4">
            <div id="check1" class="flex items-center text-gray-400 transition-all duration-300 p-3 rounded-lg hover:bg-gray-50">
                <div class="mr-3 flex-shrink-0">
                    <div class="relative w-8 h-8">
                        <div class="absolute inset-0 border-3 border-gray-300 rounded-full"></div>
                        <div class="absolute inset-0 border-3 border-transparent border-t-purple-500 border-r-purple-500 rounded-full animate-spin"></div>
                    </div>
                </div>
                <span class="text-sm font-medium">Szybko≈õƒá ≈Çadowania</span>
            </div>
            
            <div id="check2" class="flex items-center text-gray-400 transition-all duration-300 p-3 rounded-lg hover:bg-gray-50">
                <div class="mr-3 flex-shrink-0">
                    <div class="relative w-8 h-8">
                        <div class="absolute inset-0 border-3 border-gray-300 rounded-full"></div>
                        <div class="absolute inset-0 border-3 border-transparent border-t-purple-500 border-r-purple-500 rounded-full animate-spin"></div>
                    </div>
                </div>
                <span class="text-sm font-medium">Optymalizacja mobile</span>
            </div>
            
            <div id="check3" class="flex items-center text-gray-400 transition-all duration-300 p-3 rounded-lg hover:bg-gray-50">
                <div class="mr-3 flex-shrink-0">
                    <div class="relative w-8 h-8">
                        <div class="absolute inset-0 border-3 border-gray-300 rounded-full"></div>
                        <div class="absolute inset-0 border-3 border-transparent border-t-purple-500 border-r-purple-500 rounded-full animate-spin"></div>
                    </div>
                </div>
                <span class="text-sm font-medium">Test HTTPS</span>
            </div>
            
            <div id="check4" class="flex items-center text-gray-400 transition-all duration-300 p-3 rounded-lg hover:bg-gray-50">
                <div class="mr-3 flex-shrink-0">
                    <div class="relative w-8 h-8">
                        <div class="absolute inset-0 border-3 border-gray-300 rounded-full"></div>
                        <div class="absolute inset-0 border-3 border-transparent border-t-purple-500 border-r-purple-500 rounded-full animate-spin"></div>
                    </div>
                </div>
                <span class="text-sm font-medium">ChatGPT visibility</span>
            </div>
            
            <div id="check5" class="flex items-center text-gray-400 transition-all duration-300 p-3 rounded-lg hover:bg-gray-50">
                <div class="mr-3 flex-shrink-0">
                    <div class="relative w-8 h-8">
                        <div class="absolute inset-0 border-3 border-gray-300 rounded-full"></div>
                        <div class="absolute inset-0 border-3 border-transparent border-t-purple-500 border-r-purple-500 rounded-full animate-spin"></div>
                    </div>
                </div>
                <span class="text-sm font-medium">Gemini visibility</span>
            </div>
            
            <div id="check6" class="flex items-center text-gray-400 transition-all duration-300 p-3 rounded-lg hover:bg-gray-50">
                <div class="mr-3 flex-shrink-0">
                    <div class="relative w-8 h-8">
                        <div class="absolute inset-0 border-3 border-gray-300 rounded-full"></div>
                        <div class="absolute inset-0 border-3 border-transparent border-t-purple-500 border-r-purple-500 rounded-full animate-spin"></div>
                    </div>
                </div>
                <span class="text-sm font-medium">Schema Markup</span>
            </div>
        </div>
    </div>
</div>
    
    <!-- SCREEN 3: Results -->
    <div id="screen3" class="screen-container">
        <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full overflow-y-auto" style="max-height: 90vh;">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Wynik dla <span id="resultUrl" class="text-purple-600"></span></h2>
            
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="flex flex-col items-center justify-center">
                    <canvas id="scoreChart" width="200" height="200"></canvas>
                </div>
                
                <div class="flex flex-col justify-center">
                    <div class="text-center md:text-left">
                        <p class="text-gray-600 mb-2">WIDOCZNO≈öƒÜ:</p>
                        <h3 id="visibilityStatus" class="text-3xl font-bold mb-2">üî¥ NISKA</h3>
                        <p id="visibilityImpact" class="text-gray-600">Tracisz ~70% potencjalnych klient√≥w!</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-red-50 border-l-4 border-red-500 p-6 mb-8 rounded">
                <h3 class="text-xl font-bold text-red-800 mb-4">‚ùå PILNE DO NAPRAWY:</h3>
                <div id="problemsList" class="space-y-4"></div>
            </div>
            
            <div class="mb-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">üí° NAPRAWIMY TO ZA CIEBIE:</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="border-2 border-purple-500 rounded-lg p-6 hover:shadow-xl transition duration-200">
                        <h4 class="text-xl font-bold text-purple-600 mb-3">üì¶ BASIC SEO/GEO</h4>
                        <ul class="text-sm text-gray-700 space-y-2 mb-4">
                            <li>‚úì Optymalizacja PageSpeed</li>
                            <li>‚úì Schema Markup</li>
                            <li>‚úì AI visibility boost</li>
                            <li>‚úì Raport miesiƒôczny</li>
                        </ul>
                        <p class="text-2xl font-bold text-gray-800 mb-4">200‚Ç¨/mies</p>
                        <button onclick="selectPackage('basic')" 
                                class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3 rounded-lg transition shadow-lg">
                            WYBIERAM
                        </button>
                    </div>
                    
                    <div class="border-2 border-pink-500 rounded-lg p-6 hover:shadow-xl transition duration-200">
                        <h4 class="text-xl font-bold text-pink-600 mb-3">üöÄ PRO MARKETING</h4>
                        <ul class="text-sm text-gray-700 space-y-2 mb-4">
                            <li>‚úì Kompleksowa strategia</li>
                            <li>‚úì Content marketing</li>
                            <li>‚úì Kampanie reklamowe</li>
                            <li>‚úì Dedykowany manager</li>
                        </ul>
                        <p class="text-lg font-bold text-gray-800 mb-4">Indywidualna wycena</p>
                        <button onclick="selectPackage('pro')" 
                                class="w-full bg-gradient-to-r from-pink-600 to-fuchsia-600 hover:from-pink-700 hover:to-fuchsia-700 text-white font-bold py-3 rounded-lg transition shadow-lg">
                            KONTAKT
                        </button>
                    </div>
                </div>
            </div>
            
            <p class="text-center text-gray-500 text-sm">
                üìß Pe≈Çna analiza wys≈Çana na: <span id="userEmail" class="font-semibold"></span>
            </p>
        </div>
    </div>

    <script>
        let auditData = {};
        
        function startAudit() {
            const email = document.getElementById('emailInput').value;
            const url = document.getElementById('urlInput').value;
            const honeypot = document.getElementById('websiteField').value;
            
            if (honeypot) {
                console.log('Bot detected');
                return;
            }
            
            if (!email || !url) {
                showModal('Wype≈Çnij wszystkie pola');
                return;
            }
            
            if (!email.includes('@')) {
                showModal('Podaj prawid≈Çowy email');
                return;
            }
            
            if (!url.startsWith('http')) {
                showModal('URL musi zaczynaƒá siƒô od https://');
                return;
            }
            
            // Prze≈ÇƒÖcz ekrany
            document.getElementById('screen1').classList.remove('active');
            document.getElementById('screen2').classList.add('active');
            document.getElementById('analyzingUrl').textContent = url;
            runAnalysis(email, url);
        }
        
        async function runAnalysis(email, url) {
            const checks = [
                { id: 'check1', delay: 8000, message: 'üöÄ Testujƒô prƒôdko≈õƒá ≈Çadowania...' },
                { id: 'check2', delay: 3000, message: 'üì± Sprawdzam optymalizacjƒô mobile...' },
                { id: 'check3', delay: 2000, message: 'üîí Weryfikujƒô certyfikat SSL...' },
                { id: 'check4', delay: 10000, message: 'ü§ñ Pytam ChatGPT o TwojƒÖ stronƒô...' },
                { id: 'check5', delay: 10000, message: '‚ú® Sprawdzam w Gemini AI...' },
                { id: 'check6', delay: 7000, message: 'üìã Analizujƒô strukturƒô danych...' }
            ];
            
            const funMessages = [
                'üí° Wiedzia≈Çe≈õ, ≈ºe 53% u≈ºytkownik√≥w opuszcza stronƒô je≈õli ≈Çaduje siƒô d≈Çu≈ºej ni≈º 3s?',
                'üéØ Sprawdzamy czy Google Ciƒô lubi...',
                'üîç Przeczesujemy Internet w poszukiwaniu informacji o Tobie...',
                '‚ö° To trwa d≈Çu≈ºej, bo robimy to dok≈Çadnie!',
                'üé® Analizujemy ka≈ºdy piksel Twojej strony...',
                'üåü Prawie gotowe! Przygotowujemy raport...'
            ];
            
            let messageIndex = 0;
            const messageInterval = setInterval(() => {
                const messageEl = document.getElementById('loadingMessage');
                if (messageEl && messageIndex < funMessages.length) {
                    messageEl.textContent = funMessages[messageIndex];
                    messageIndex++;
                }
            }, 5000);
            
            let progress = 0;
            const progressIncrement = 100 / checks.length;
            
            document.getElementById('progressBar').style.width = '2%';
            document.getElementById('progressText').textContent = '2%';
            document.getElementById('statusText').textContent = 'Rozpoczynam analizƒô...';
            
            for (let i = 0; i < checks.length; i++) {
                document.getElementById('statusText').textContent = checks[i].message;
                
                progress += progressIncrement / 2;
                document.getElementById('progressBar').style.width = progress + '%';
                document.getElementById('progressText').textContent = Math.round(progress) + '%';
                
                await new Promise(resolve => setTimeout(resolve, checks[i].delay));
                
                progress += progressIncrement / 2;
                document.getElementById('progressBar').style.width = progress + '%';
                document.getElementById('progressText').textContent = Math.round(progress) + '%';
                
                const checkEl = document.getElementById(checks[i].id);
// Zamie≈Ñ spinner na check icon
const spinnerDiv = checkEl.querySelector('.relative');
if (spinnerDiv) {
    spinnerDiv.innerHTML = '<div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></div>';
}
checkEl.classList.remove('text-gray-400');
checkEl.classList.add('text-green-600');
checkEl.classList.add('bg-green-50');
            }
            
            clearInterval(messageInterval);
            document.getElementById('statusText').textContent = '‚ú® Generujƒô raport...';
            
            try {
                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, url })
                });
                
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                auditData = await response.json();
            } catch (error) {
                console.error('API Error:', error);
                auditData = {
                    score: 47,
                    pageSpeed: 35,
                    loadTime: 4.2,
                    mobileFriendly: false,
                    https: true,
                    chatGPTCitation: false,
                    geminiCitation: false,
                    schemaMarkup: false
                };
            }
            
            await new Promise(resolve => setTimeout(resolve, 500));
            showResults(email, url, auditData);
        }
        
        function showResults(email, url, data) {
            document.getElementById('screen2').classList.remove('active');
            document.getElementById('screen3').classList.add('active');
            
            document.getElementById('resultUrl').textContent = url;
            document.getElementById('userEmail').textContent = email;
            
            const ctx = document.getElementById('scoreChart').getContext('2d');
            const chartColor = data.score >= 70 ? '#10b981' : data.score >= 40 ? '#f59e0b' : '#ef4444';
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [data.score, 100 - data.score],
                        backgroundColor: [chartColor, '#e5e7eb'],
                        borderWidth: 0
                    }]
                },
                options: {
                    cutout: '75%',
                    plugins: { legend: { display: false }, tooltip: { enabled: false } }
                },
                plugins: [{
                    beforeDraw: function(chart) {
                        const ctx = chart.ctx;
                        ctx.restore();
                        ctx.font = (chart.height / 80).toFixed(2) + "em sans-serif";
                        ctx.textBaseline = "middle";
                        const text = data.score + "%";
                        ctx.fillText(text, Math.round((chart.width - ctx.measureText(text).width) / 2), chart.height / 2);
                        ctx.save();
                    }
                }]
            });
            
            const statusEl = document.getElementById('visibilityStatus');
            const impactEl = document.getElementById('visibilityImpact');
            
            if (data.score >= 70) {
                statusEl.textContent = 'üü¢ DOBRA';
                statusEl.className = 'text-3xl font-bold mb-2 text-green-600';
                impactEl.textContent = '≈öwietnie! Twoja strona jest dobrze widoczna.';
            } else if (data.score >= 40) {
                statusEl.textContent = 'üü° ≈öREDNIA';
                statusEl.className = 'text-3xl font-bold mb-2 text-yellow-600';
                impactEl.textContent = 'Tracisz ~40% potencjalnych klient√≥w!';
            } else {
                statusEl.textContent = 'üî¥ NISKA';
                statusEl.className = 'text-3xl font-bold mb-2 text-red-600';
                impactEl.textContent = 'Tracisz ~70% potencjalnych klient√≥w!';
            }
            
            const problems = getTop2Problems(data);
            document.getElementById('problemsList').innerHTML = problems.map((p, i) => `
                <div class="border-l-2 border-red-400 pl-4">
                    <p class="font-bold text-gray-800">${i + 1}. ${p.title}</p>
                    <p class="text-sm text-gray-600">‚Üí ${p.impact}</p>
                </div>
            `).join('');
        }
        
        function getTop2Problems(data) {
            const problems = [];
            if (data.pageSpeed < 60) problems.push({title: `Strona ≈Çaduje siƒô ${data.loadTime}s`, impact: 'U≈ºytkownicy uciekajƒÖ po 3s'});
            if (!data.chatGPTCitation && !data.geminiCitation) problems.push({title: 'ChatGPT i Gemini nie znajƒÖ Twojej firmy', impact: 'Konkurencja zabiera klient√≥w'});
            if (!data.mobileFriendly) problems.push({title: 'Strona nie dzia≈Ça na telefonach', impact: '70% u≈ºytkownik√≥w korzysta z mobile'});
            if (!data.https) problems.push({title: 'Brak certyfikatu bezpiecze≈Ñstwa', impact: 'Google karze strony'});
            if (!data.schemaMarkup) problems.push({title: 'Brak Schema Markup', impact: 'AI nie rozumie struktury'});
            return problems.slice(0, 2);
        }
        
        function selectPackage(type) {
            const email = document.getElementById('userEmail').textContent;
            const url = document.getElementById('resultUrl').textContent;
            
            if (type === 'basic') {
                window.location.href = `mailto:pomelomarketingandsoft@gmail.com?subject=Zam√≥wienie BASIC&body=Email: ${email}%0AStrona: ${url}`;
            } else {
                window.location.href = `mailto:pomelomarketingandsoft@gmail.com?subject=Wycena PRO&body=Email: ${email}%0AStrona: ${url}`;
            }
        }
        
        function showModal(message) {
            const backdrop = document.createElement('div');
            backdrop.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            backdrop.onclick = () => backdrop.remove();
            
            const modal = document.createElement('div');
            modal.className = 'bg-white rounded-2xl p-8 max-w-sm mx-4 shadow-2xl';
            modal.innerHTML = `
                <div class="text-center">
                    <div class="text-4xl mb-4">‚ö†Ô∏è</div>
                    <p class="text-lg text-gray-800 mb-6">${message}</p>
                    <button onclick="this.closest('.fixed').remove()" 
                            class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3 px-8 rounded-lg transition shadow-lg">
                        OK
                    </button>
                </div>
            `;
            backdrop.appendChild(modal);
            document.body.appendChild(backdrop);
        }
    </script>
</body>
</html>
